#!/usr/bin/env bash

rdo_header common.system

rdo__machine_cpu_count() {
  nproc --ignore 2
}

rdo__machine_memory() {
  local memory_size="$(free -m | awk '/^Mem:/{print $2}')"

  if (( "${memory_size}" < 15000 )); then
    echo "$(( ${memory_size} * 2 / 4 ))"
  else
    echo 15000
  fi
}
